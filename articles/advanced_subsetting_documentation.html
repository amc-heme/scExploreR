<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="scExploreR">
<title>How to Use String Subseting • scExploreR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="How to Use String Subseting">
<meta property="og:description" content="scExploreR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">scExploreR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.3</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Help and Tutorials</h6>
    <a class="dropdown-item" href="../articles/dataset_setup_walkthrough.html">App Setup Walkthrough</a>
    <a class="dropdown-item" href="../articles/tutorial.html">Exploring your Data</a>
    <a class="dropdown-item" href="../articles/scRNA_Plots_Explained.html">Guide to scRNA-Seq Plots</a>
    <a class="dropdown-item" href="../articles/advanced_subsetting_documentation.html">String Subsetting Guide</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Reference</h6>
    <a class="dropdown-item" href="../articles/full_documentation.html">Full App Manual</a>
    <a class="dropdown-item" href="../articles/config_documentation.html">Config App Documentation</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/amc-heme/scExploreR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>How to Use String Subseting</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/amc-heme/scExploreR/blob/HEAD/vignettes/advanced_subsetting_documentation.Rmd" class="external-link"><code>vignettes/advanced_subsetting_documentation.Rmd</code></a></small>
      <div class="d-none name"><code>advanced_subsetting_documentation.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="how-to-use-string-subsetting">How to Use String Subsetting<a class="anchor" aria-label="anchor" href="#how-to-use-string-subsetting"></a>
</h2>
<div class="section level3">
<h3 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h3>
<p>String subsetting allows you to specify a manual subset of the data
using conditions based on metadata or features in the object. Cells that
match the conditions specified in the string will be returned for
downstream analysis in the app. Among other things, this allows for the
selection of cells that express a given surface protein above or below a
specified value, or within a specified range.</p>
<p>While string subsetting is very capable at selecting specific groups
of cells, the entry must follow R syntax rules for subsetting to
function properly. A description of the syntax to use for common
conditions is given below, along with examples of proper syntax.</p>
</div>
<div class="section level3">
<h3 id="subsetting-for-categorical-data">Subsetting for Categorical Data<a class="anchor" aria-label="anchor" href="#subsetting-for-categorical-data"></a>
</h3>
<p>To subset on categorical data, enter the metadata category exactly as
it displays in the list under the “Metadata” tab, <strong>without
quotes</strong>. Next, enter <code>%in%</code>, followed by the list of
values you would like to subset for.</p>
<p>The list of values must use standard R notation for vectors. This
includes:</p>
<ul>
<li>Quotes around each value</li>
<li>Commas between values</li>
<li>Enclosure of the list with <code><a href="https://rdrr.io/r/base/c.html" class="external-link">c()</a></code>.</li>
</ul>
<p>The values in the data dictionary are displayed without quotes, so
you will need to add quotes when entering them using this format.</p>
<p>Example subsetting command for categorical data:</p>
<pre><code><span><span class="va">clusters</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"DCs"</span>, <span class="st">"Megakaryocytes"</span>, <span class="st">"B Cells"</span><span class="op">)</span></span></code></pre>
<p>Here, <code>clusters</code> is the category to subset based on, and
vector notation is used to select DCs, megakaryocytes, and B cells.
Cells that have a <code>clusters</code> annotation that matches either
of these three clusters will be selected.</p>
</div>
<div class="section level3">
<h3 id="subsetting-for-numeric-metadata">Subsetting for Numeric Metadata<a class="anchor" aria-label="anchor" href="#subsetting-for-numeric-metadata"></a>
</h3>
<p>To subset on numeric metadata, string subsetting can be used to
specify upper and lower bounds for the metadata in question.</p>
<p>As with categorical metadata, the metadata category should be entered
as it appears under the “Metadata” tab, without quotes. To specify an
upper bound, use the <code>&lt;</code> operator, and to specify a lower
bound, use the <code>&gt;</code> operator.</p>
<p>For example, <code>percent.mt &lt; 10</code> will select cells with a
mitochondrial DNA content less than 10 percent.
<code>percent.mt &gt; 2</code> would select cells with a content of at
least 2 percent. To include the threshold in the selection, use
<code>&gt;=</code> and <code>&lt;=</code> (greater than or equal to and
less than or equal to, respectively).</p>
</div>
<div class="section level3">
<h3 id="subsetting-for-feature-expression">Subsetting for Feature Expression<a class="anchor" aria-label="anchor" href="#subsetting-for-feature-expression"></a>
</h3>
<p>Feature expression can be used to form subsets using the same syntax
as for numeric metadata. Simply use syntax for numeric metadata to
define ranges based on feature expression. Gene signatures and surface
proteins can also be used with this method.</p>
<p>The desired feature must be entered using its ID, which includes its
designation as a gene, surface protein, or gene signature. Please use
the selection menu in the “Feature Search” tab to obtain the proper ID
for the feature you are looking for. A range of normalized expression
values is also given for the feature of interest in this tab, and can be
used to assist in specifying your threshold for string subsetting.</p>
</div>
<div class="section level3">
<h3 id="subsetting-based-on-multiple-criteria">Subsetting Based on Multiple Criteria<a class="anchor" aria-label="anchor" href="#subsetting-based-on-multiple-criteria"></a>
</h3>
<p>The use of the logical operators AND (<code>&amp;</code>) and OR
(<code>|</code>) can be used to specify as many conditions as you would
like.</p>
<div class="section level4">
<h4 id="and-operator">AND Operator<a class="anchor" aria-label="anchor" href="#and-operator"></a>
</h4>
<p>The AND (<code>&amp;</code>) operator is often used to select cells
based on multiple types of metadata. For example, say the object has
annotations for patient ID, response to treatment, and clusters. To
select cells based on a combination of these three criteria, the
following string can be entered:</p>
<pre><code><span><span class="op">(</span><span class="va">id</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"12778"</span>, <span class="st">"27828"</span>, <span class="st">"57578"</span><span class="op">)</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">response</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"response"</span>,<span class="st">"no response"</span><span class="op">)</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">clusters</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CD8 T/NK"</span>, <span class="st">"CD4 T"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
<p>The selection above would return cells with metadata for
<code>id</code>, <code>response</code>, and <code>clusters</code>
matching the values specified. Cells must match the values listed in all
three categories to be included in the subset.</p>
<p>With the use of the <code>&amp;</code> operator on categorical
metadata, it is possible to specify criteria that do not match any
cells. If no cells are returned for the subset entered, try performing
the subset again with broader criteria.</p>
<p>For features and numeric metadata, the <code>&amp;</code> operator
can be used to specify ranges with lower and upper bounds. For example
<code>(rna_TP53 &gt; 1) &amp; (rna_TP53 &lt; 2)</code> will select cells
that have a normalized expression value for TP53 between 1 and 2.</p>
</div>
<div class="section level4">
<h4 id="or-operator">OR Operator<a class="anchor" aria-label="anchor" href="#or-operator"></a>
</h4>
<p>The OR (<code>|</code>) operator can be used to select cells that
match one set of criteria or the other. For numeric metadata, this can
be used to select both cells below one defined threshold, and above
another. For example <code>(rna_IL6 &lt; 1) | (rna_IL6 &gt; 3)</code>
would select cells where the normalized expression of IL6 is less than 1
or greater than 3.</p>
<p>You may notice that parentheses enclose conditionals between the
<code>&amp;</code> and <code>|</code> operators in the examples above.
While this is not required, this syntax is recommended to prevent
errors.</p>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Hematology Informatics Group.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
