<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Guidelines for Preparing objects for scExploreR • scExploreR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Guidelines for Preparing objects for scExploreR">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">scExploreR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><h6 class="dropdown-header" data-toc-skip>Help and Tutorials</h6></li>
    <li><a class="dropdown-item" href="../articles/dataset_setup_walkthrough.html">App Setup Walkthrough</a></li>
    <li><a class="dropdown-item" href="../articles/tutorial.html">Exploring your Data</a></li>
    <li><a class="dropdown-item" href="../articles/object_guidelines.html">Object Preparation Guidelines</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Additional Information</h6></li>
    <li><a class="dropdown-item" href="../articles/scRNA_Plots_Explained.html">Guide to scRNA-Seq Plots</a></li>
    <li><a class="dropdown-item" href="../articles/advanced_subsetting_documentation.html">String Subsetting Guide</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Full Documentation</h6></li>
    <li><a class="dropdown-item" href="../articles/full_documentation.html">scExploreR Documentation</a></li>
    <li><a class="dropdown-item" href="../articles/config_documentation.html">Config App Documentation</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/amc-heme/scExploreR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<link href="object_guidelines_files/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="object_guidelines_files/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Guidelines for Preparing objects for scExploreR</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/amc-heme/scExploreR/blob/main/vignettes/object_guidelines.Rmd" class="external-link"><code>vignettes/object_guidelines.Rmd</code></a></small>
      <div class="d-none name"><code>object_guidelines.Rmd</code></div>
    </div>

    
    
<style type="text/css">
.center{text-align:center;display:block}.white-text{color:white}.card-header{background-color:#CFB87C;margin-top:0px}.card-body{background-color:#E1E1E1;border-radius:0px 0px var(--bs-card-border-radius) var(--bs-card-border-radius)}.callout{padding:20px;margin:20px 0;border:1px solid #eee;border-left-width:8px;border-radius:8px}.callout h4,.callout h5{margin-top:0;margin-bottom:5px}.callout p:last-child{margin-bottom:0}.callout code{border-radius:3px}.callout+.bs-callout{margin-top:-5px}.callout-default{border-left-color:#777;background-color:#77735}.callout-default h4,.callout-default h5{color:#777}.callout-primary{border-left-color:#428bca;background-color:#428bca35}.callout-primary h4,.callout-primary h5{color:#428bca}.callout-success{border-left-color:#5cb85c;background-color:#5cb85c35}.callout-success h4,.callout-success h5{color:#5cb85c}.callout-danger{border-left-color:#d9534f;background-color:#d9534f35}.callout-danger h4,.callout-danger h5{color:#d9534f}.callout-warning{border-left-color:#f0ad4e;background-color:#f0ad4e35}.callout-warning h4,.callout-warning h5{color:#f0ad4e}.callout-info{border-left-color:#5bc0de;background-color:#5bc0de35}.callout-info h4,.callout-info h5{color:#5bc0de}.callout-bdc{border-left-color:#29527a;background-color:#29527a35}.callout-bdc h4,.callout-bdc h5{color:#29527a}.scroll-80{max-height:80px;overflow-y:auto;background-color:inherit}.scroll-100{max-height:100px;overflow-y:auto;background-color:inherit}.scroll-300{max-height:300px;overflow-y:auto;background-color:inherit}.object-table th,.object-table td{background-color:transparent !important;padding:5px 15px}.object-table tr,.object-table td{border-style:none}.object-table table{background-color:transparent !important}.object-table .header{border-style:solid;border-width:0px 0px 2px 0px;border-color:#3a3c3e}.yes{color:#008b00}.no{color:#8b0000}.x-large{font-size:1.3em}.small{font-size:0.9em}
</style>
<p>This vignette details the requirements and guidelines for loading
single-cell data in scExploreR.</p>
<div class="section level2">
<h2 id="what-objects-can-i-upload-to-scexplorer">What objects can I upload to scExploreR?<a class="anchor" aria-label="anchor" href="#what-objects-can-i-upload-to-scexplorer"></a>
</h2>
<p>scExploreR works with many common object formats for single-cell
data. Functionality is largely similar between object classes, but there
are some differences. A table with the supported object classes
summarizing the differences in functionality between each class is given
below.</p>
<div class="object-table">
<table class="table">
<colgroup>
<col class="col-md-4" span="1">
<col class="col-md-2" span="1">
<col class="col-md-2" span="1">
<col class="col-md-2" span="1">
<col class="col-md-2" span="1">
</colgroup>
<thead class="header"><tr>
<th></th>
<th>
<b class="center">Seurat</b>
</th>
<th>
<b class="center">Seurat v5 + BPCells</b>
</th>
<th>
<b class="center">SingleCellExperiment</b>
</th>
<th>
<b class="center">Anndata</b>
</th>
</tr></thead>
<tbody>
<tr>
<td>
<b>Plotting</b>
</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Full plotting capabilities</td>
<td>
<i class="far fa-circle-check yes fas center x-large" role="presentation" aria-label="circle-check icon"></i>
</td>
<td>
<i class="far fa-circle-check yes fas center x-large" role="presentation" aria-label="circle-check icon"></i>
</td>
<td>
<i class="far fa-circle-check yes fas center x-large" role="presentation" aria-label="circle-check icon"></i>
</td>
<td>
<i class="far fa-circle-check yes fas center x-large" role="presentation" aria-label="circle-check icon"></i>
</td>
</tr>
<tr>
<td>Consistent Style</td>
<td>
<i class="far fa-circle-check yes fas center x-large" role="presentation" aria-label="circle-check icon"></i>
</td>
<td>
<i class="far fa-circle-check yes fas center x-large" role="presentation" aria-label="circle-check icon"></i>
</td>
<td>
<i class="far fa-circle-check yes fas center x-large" role="presentation" aria-label="circle-check icon"></i>
</td>
<td>
<i class="far fa-circle-check yes fas center x-large" role="presentation" aria-label="circle-check icon"></i>
</td>
</tr>
<tr>
<td>
<b>Subsetting</b>
</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Based on categorical Metadata</td>
<td>
<i class="far fa-circle-check yes fas center x-large" role="presentation" aria-label="circle-check icon"></i>
</td>
<td>
<i class="far fa-circle-check yes fas center x-large" role="presentation" aria-label="circle-check icon"></i>
</td>
<td>
<i class="far fa-circle-check yes fas center x-large" role="presentation" aria-label="circle-check icon"></i>
</td>
<td>
<i class="far fa-circle-check yes fas center x-large" role="presentation" aria-label="circle-check icon"></i>
</td>
</tr>
<tr>
<td>Based on feature expression</td>
<td>
<i class="far fa-circle-check yes fas center x-large" role="presentation" aria-label="circle-check icon"></i>
</td>
<td>
<i class="far fa-circle-check yes fas center x-large" role="presentation" aria-label="circle-check icon"></i>
</td>
<td>
<i class="fas fa-circle-minus no fas center x-large" role="presentation" aria-label="circle-minus icon"></i>
</td>
<td>
<i class="far fa-circle-check yes fas center x-large" role="presentation" aria-label="circle-check icon"></i>
</td>
</tr>
<tr>
<td>Advanced code-based subsetting</td>
<td>
<i class="far fa-circle-check yes fas center x-large" role="presentation" aria-label="circle-check icon"></i>
</td>
<td>
<i class="far fa-circle-check yes fas center x-large" role="presentation" aria-label="circle-check icon"></i>
</td>
<td>
<i class="fas fa-circle-minus no fas center x-large" role="presentation" aria-label="circle-minus icon"></i>
</td>
<td>
<i class="fas fa-circle-minus no fas center x-large" role="presentation" aria-label="circle-minus icon"></i>
</td>
</tr>
<tr>
<td>
<b>Differential Gene Expression</b>
</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Can perform DGE</td>
<td>
<i class="far fa-circle-check yes fas center x-large" role="presentation" aria-label="circle-check icon"></i>
</td>
<td>
<i class="far fa-circle-check yes fas center x-large" role="presentation" aria-label="circle-check icon"></i>
</td>
<td>
<i class="fas fa-circle-minus no fas center x-large" role="presentation" aria-label="circle-minus icon"></i>
</td>
<td>
<i class="far fa-circle-check yes fas center x-large" role="presentation" aria-label="circle-check icon"></i>
</td>
</tr>
<tr>
<td>Results show AUC value</td>
<td>
<i class="far fa-circle-check yes fas center x-large" role="presentation" aria-label="circle-check icon"></i>
</td>
<td>
<i class="fas fa-circle-minus no fas center x-large" role="presentation" aria-label="circle-minus icon"></i>
</td>
<td>
<i class="fas fa-circle-minus no fas center x-large" role="presentation" aria-label="circle-minus icon"></i>
</td>
<td>
<i class="fas fa-circle-minus no fas center x-large" role="presentation" aria-label="circle-minus icon"></i>
</td>
</tr>
</tbody>
</table>
</div>
<div class="callout callout-info">
<h5>Note</h5>
<p>The function used to perform DGE varies by object class. The functions used for each object class are listed below.</p>
<table style="width: 100%;" class="table">
<colgroup>
<col class="col-md-4" span="1">
<col class="col-md-8" span="1">
</colgroup>
<tbody>
<tr>
<td>
<b>Seurat</b>
</td>
<td>
<a href="https://immunogenomics.github.io/presto/reference/wilcoxauc.html" class="external-link">presto::wilcoxauc</a>
</td>
</tr>
<tr>
<td>
<b>Seurat v5 + BPCells</b>
</td>
<td>
<a href="https://bnprks.github.io/BPCells/reference/marker_features.html" class="external-link">BPcells::marker_features</a>
</td>
</tr>
<tr>
<td>
<b>anndata</b>
</td>
<td>
<a href="https://scanpy.readthedocs.io/en/stable/generated/scanpy.tl.rank_genes_groups.html" class="external-link">scanpy.tl.rank_genes_groups</a>
</td>
</tr>
</tbody>
</table>
<p style="margin-top: 15px;">scExploreR uses the most performant wilcoxon rank sum function for each object class. DGE is not available for SingleCellExperiment objects because there is no known package that can process both the standard sparse matrices and the HDF5-enabled DelayedArray matrices in these objects.</p>
</div>
</div>
<div class="section level2">
<h2 id="how-should-objects-be-processed">How should objects be processed?<a class="anchor" aria-label="anchor" href="#how-should-objects-be-processed"></a>
</h2>
<p>Generally speaking, objects should be be pre-processed before loading
into the browser. Pre-processing steps encompass operations such as
those outlined in the <a href="https://satijalab.org/seurat/articles/pbmc3k_tutorial" class="external-link">Seurat</a>
and <a href="https://scanpy.readthedocs.io/en/stable/tutorials/basics/clustering.html" class="external-link">Scanpy</a>
docs.</p>
<p>Objects should have the have the following characteristics below
before loading into the browser. Objects lacking these properties may
load in scExploreR, but key functionality may be limited, and unexpected
behavior may be observed.</p>
<p>Objects should have:</p>
<ul>
<li>At least one reduction.</li>
<li>Feature expression data for at least one modality (assay in Seurat).
The browser is designed for use with both unimodal or multimodal
data.</li>
<li>Normalized count data for each modality included.</li>
<li>No <code>NA</code> values in the count/normalized count data (or
<code>NaN</code> values in anndata object format).</li>
</ul>
<div class="callout callout-info">
<h5>
Note
</h5>
<p>If <code>NA</code> literals exist in feature expression data, the
config app will stop loading the object and return an error. We did this
because <code>NA</code> values in expression data are known to cause
issues in the app. If you are using software that outputs count data
that evaluates to <code>NA</code> in R, or <code>NaN</code> in Python,
we recommend changing those values to <code>0</code>. If this causes
issues with the software you are using, please <a href="https://github.com/amc-heme/scExploreR/issues" class="external-link">file an issue</a>
and mention the software name in the issue title and text.</p>
</div>
<ul>
<li>No <code>NA</code> values in metadata. <code>NA</code> values for
categorical metadata should be renamed from literal <code>NA</code>
values to character values (<code>"NA"</code>, <code>"Undefined"</code>,
<code>"Unspecified"</code>, etc.) before loading the object into the
app.</li>
</ul>
<p>If you wish to load an object that doesn’t meet the conditions above,
feel free to <a href="https://github.com/amc-heme/scExploreR/issues" class="external-link">file an issue</a>
describing your situation. Please search the issue board for similar
situations to yours before filing an issue.</p>
<div class="section level3">
<h3 id="additional-preprocessing-for-anndata-objects">Additional Preprocessing for anndata objects<a class="anchor" aria-label="anchor" href="#additional-preprocessing-for-anndata-objects"></a>
</h3>
<p>For anndata objects, scExploreR requires additional information to
locate matrices corresponding to reductions and multimodal data. Unlike
Seurat and SingleCellExperment objects, the anndata class does not
specify storage locations exclusive to modalities and reductions.
Instead, both are stored in <code>obsm</code>.</p>
<p>For scExploreR to properly locate additional modalities and
reductions, you must specify the names of the matrices in
<code>obsm</code> corresponding to these data types. This is done by
adding two python lists to <code>uns</code>:
<code>uns.scExploreR_assays</code> for additional modalities, and
<code>uns.scExploreR_reductions</code> for reductions.</p>
<p>For example, if you have an object with surface protein measurements
in <code>obsm.protein</code>, and UMAP and PCA reductions in
<code>obsm.X_uamp</code> and <code>obsm.X_pca</code>, respectively, you
would enter the following in uns (replacing <code>object</code> with the
name of the variable you assigned to your object):</p>
<pre><code>object.uns["scExploreR_reductions"] = ["X_umap", "X_pca"]

object.uns["scExploreR_assays"] = ["protein"]</code></pre>
<p>For an additional example, see the <a href="dataset_setup_walkthrough.html#anndata_uns_requirements">app setup
walkthrough vignette</a>.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Hematology Informatics Group.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
